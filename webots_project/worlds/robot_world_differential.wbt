#VRML_SIM R2025a utf8

WorldInfo {
  info [
    "S4 Remote Robot Management System - Differential Drive Robot"
    "Fitfest25 Hackathon"
  ]
  title "S4 Robot World - Differential Drive"
  basicTimeStep 64
  contactProperties [
    ContactProperties {
      material1 "wheel"
      material2 "floor"
      coulombFriction [
        0.8
      ]
      softCFM 0.0001
    }
  ]
}

Viewpoint {
  orientation -0.5 0.5 0.7 2.0
  position 0 0 10
}

Background {
  skyColor [
    0.4 0.7 1
  ]
}

DirectionalLight {
  direction 0 -1 -0.5
  castShadows TRUE
}

DEF FLOOR Solid {
  children [
    Shape {
      appearance PBRAppearance {
        baseColor 0.8 0.8 0.8
        roughness 1
        metalness 0
      }
      geometry Plane {
        size 20 20
      }
    }
  ]
  name "floor"
  contactMaterial "floor"
  boundingObject Plane {
    size 20 20
  }
}

DEF ROBOT Robot {
  translation 0 0 0.05
  rotation 0 0 1 0
  children [
    DEF BODY Shape {
      appearance PBRAppearance {
        baseColor 0.2 0.4 0.8
        metalness 0.3
        roughness 0.5
      }
      geometry Box {
        size 0.4 0.3 0.1
      }
    }
    DEF LEFT_WHEEL HingeJoint {
      jointParameters HingeJointParameters {
        axis 0 1 0
        anchor 0 0.2 0
      }
      device [
        RotationalMotor {
          name "left_wheel_motor"
          maxVelocity 10
          maxTorque 5.0
        }
        PositionSensor {
          name "left_wheel_sensor"
        }
      ]
      endPoint Solid {
        translation 0 0.2 0
        rotation 1 0 0 1.5708
        children [
          DEF WHEEL_SHAPE Shape {
            appearance PBRAppearance {
              baseColor 0.1 0.1 0.1
              metalness 0
            }
            geometry Cylinder {
              height 0.04
              radius 0.05
            }
          }
        ]
        name "left_wheel"
        contactMaterial "wheel"
        boundingObject USE WHEEL_SHAPE
        physics Physics {
          density -1
          mass 0.1
        }
      }
    }
    DEF RIGHT_WHEEL HingeJoint {
      jointParameters HingeJointParameters {
        axis 0 1 0
        anchor 0 -0.2 0
      }
      device [
        RotationalMotor {
          name "right_wheel_motor"
          maxVelocity 10
          maxTorque 5.0
        }
        PositionSensor {
          name "right_wheel_sensor"
        }
      ]
      endPoint Solid {
        translation 0 -0.2 0
        rotation 1 0 0 1.5708
        children [
          USE WHEEL_SHAPE
        ]
        name "right_wheel"
        contactMaterial "wheel"
        boundingObject USE WHEEL_SHAPE
        physics Physics {
          density -1
          mass 0.1
        }
      }
    }
    DEF CASTER Solid {
      translation -0.15 0 -0.05
      children [
        Shape {
          appearance PBRAppearance {
            baseColor 0.3 0.3 0.3
            metalness 0
          }
          geometry Sphere {
            radius 0.02
          }
        }
      ]
      name "caster"
      contactMaterial "wheel"
      boundingObject Sphere {
        radius 0.02
      }
      physics Physics {
        density -1
        mass 0.05
      }
    }
    GPS {
      name "gps"
    }
    Compass {
      name "compass"
    }
  ]
  name "differential_robot"
  boundingObject USE BODY
  physics Physics {
    density -1
    mass 1.0
  }
  controller "robot_controller"
}
